document.addEventListener('DOMContentLoaded', function() {
    const sidenavElement = document.getElementById('sidenav');
    const accountBtnTopbar = document.getElementById('menuBtn');
    const topnav = document.getElementById('topnav');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const loginBtn = document.getElementById('loginBtn');
    const registerBtn = document.getElementById('sidenavRegisterBtn');

    // Set initial styles for elements
    sidenavElement.style.right = "-40%";

    // Function to toggle the sidebar
    function openSidebar() {
        sidenavElement.style.right = "0";
        topnav.style.right = "44%";
        accountBtnTopbar.style.display = "none";
    }

    function closeSidebar() {
        sidenavElement.style.right = "-40%";
        topnav.style.right = "4%";
        accountBtnTopbar.style.display = "block";
    }

    // Event listener for sidebar toggle button
    if (accountBtnTopbar) {
        accountBtnTopbar.onclick = function() {
            if (sidenavElement.style.right === "-40%") {
                openSidebar();
            } else {
                closeSidebar();
            }
        };
    }

    // Close the sidebar when clicking outside of it
    document.addEventListener('click', function(e) {
        if (!sidenavElement.contains(e.target) && !accountBtnTopbar.contains(e.target)) {
            closeSidebar();
        }
    });

    // Function to toggle the display of the login form
    function openLoginForm() {
        loginForm.style.display = 'block';
        registerForm.style.display = 'none';
        resetForm(loginForm.querySelector('form'));
        closeSidebar();
    }

    // Function to toggle the display of the register form
    function openRegisterForm() {
        registerForm.style.display = 'block';
        loginForm.style.display = 'none';
        resetForm(registerForm.querySelector('form'));
        closeSidebar();
    }

    // Event listener for login button
    if (loginBtn) {
        loginBtn.onclick = function() {
            openLoginForm();
        };
    }

    // Event listener for register button
    if (registerBtn) {
        registerBtn.onclick = function() {
            openRegisterForm();
        };
    }

    // Close the forms when clicking outside of them
    document.addEventListener('click', function(event) {
        if (!loginForm.contains(event.target) && event.target !== loginBtn) {
            loginForm.style.display = 'none';
        }
        if (!registerForm.contains(event.target) && event.target !== registerBtn) {
            registerForm.style.display = 'none';
        }
    });

    // Reset form fields
    function resetForm(form) {
        form.reset();
    }
});
